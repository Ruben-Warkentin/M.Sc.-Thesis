#This file contains information on how to create an index file to use with CatDCD. This is useful for large DCD files, for example if you want to extract the DCD of only the protein, or only certain atoms. 

#Information taken from: https://mini.ourphysics.org/wiki/index.php/CatDCD

#Making an index file
    #open VMD in the directory with the right pdb and psf files
    set filename "select_atoms_0_107"

    #load in the PDB file
    mol new ionized.pdb type pdb waitfor all

    #select atoms, or could select using other methods (ex: proetin, water, ions, etc.)
    set sel [atomselect top "serial 0 to 107"]
    #set indices [$sel get index]

    #create a file in which to store the index
    set filename "SLeX_0_107"
    set file [open $filename.ind w]
    foreach indices [$sel get index] {
    puts $file "$indices"
    }

    # flush $file
    close $file

##############################################################################

#Extracting your DCD file containing only the desired atoms
    #ensure that all necessary files are in the same directory
    catdcd -o output.dcd -i index.ind trajectory.dcd
#combine two dcd files
	catdcd -o ankyrin.dcd ankyrin_01.dcd ankyrin_02.dcd
	
    
#############################################################################

    #it is likely that catdcd is not working properly out of the box, if so, the fix on ubuntu is below
    #1 https://stackoverflow.com/questions/31447361/cannot-concatenate-dcd-files-in-vmd-using-catdcd-tool
    gedit ~/.bashrc
    #within the bashrc file, add the following line
    export PATH="/usr/local/lib/vmd/plugins/LINUXAMD64/bin/catdcd5.1:$PATH"
    
    #2 https://askubuntu.com/questions/753234/installing-libexpat0-instead-of-libexpat1/753244#753244?newreg=dcbedfbba25b4976b2627659855a0f73)
    #This is the first command: 
    sudo apt install libexpat1 
    #This is the second command: 
    sudo ln -s /lib/x86_64-linux-gnu/libexpat.so.1 /lib/x86_64-linux-gnu/libexpat.so.0
